<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MOJO Framework - Events Example">
    <title>MOJO Events Example</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Events Example Styles -->
    <style>
        :root {
            --mojo-primary-color: #007bff;
            --mojo-success-color: #28a745;
            --mojo-danger-color: #dc3545;
            --mojo-warning-color: #ffc107;
            --mojo-info-color: #17a2b8;
            --mojo-secondary-color: #6c757d;
        }

        body {
            background-color: #f8f9fa;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .events-example-page {
            padding: 20px 0;
        }

        /* Event Publisher Styles */
        .event-publisher {
            margin-bottom: 20px;
        }

        .event-publisher .card-header {
            background: linear-gradient(135deg, var(--mojo-primary-color), #0056b3);
            color: white;
        }

        /* Event Listener Styles */
        .event-listener {
            margin-bottom: 20px;
        }

        .event-listener .card-header {
            background: linear-gradient(135deg, var(--mojo-success-color), #1e7e34);
            color: white;
        }

        .event-log {
            background-color: #1a1a1a;
            color: #00ff00;
            font-family: 'Courier New', Courier, monospace;
            font-size: 11px;
            line-height: 1.4;
        }

        .log-entry {
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding: 2px 0;
        }

        /* Event Stats Styles */
        .event-stats {
            margin-bottom: 20px;
        }

        .event-stats .card-header {
            background: linear-gradient(135deg, var(--mojo-info-color), #117a8b);
            color: white;
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            border-radius: 6px;
            background-color: #f8f9fa;
            margin-bottom: 10px;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            display: block;
        }

        .event-types-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 8px;
            background-color: #f8f9fa;
        }

        /* Button improvements */
        .btn {
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .btn:hover {
            transform: translateY(-1px);
        }

        .btn-group-vertical .btn {
            margin-bottom: 5px;
        }

        /* Card improvements */
        .card {
            border-radius: 10px;
            border: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }

        .card-header h5, .card-header h6 {
            margin-bottom: 0;
        }

        /* Animation for real-time updates */
        .stat-number {
            transition: all 0.3s ease;
        }

        .stat-number.updated {
            animation: pulse 0.6s ease-in-out;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
                color: var(--mojo-success-color);
            }
        }

        /* Loading and transitions */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .loading-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .loading-spinner {
            display: inline-block;
            width: 2rem;
            height: 2rem;
            border: 3px solid var(--mojo-primary-color);
            border-right-color: transparent;
            border-radius: 50%;
            animation: spin 0.75s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Event type badges */
        .badge {
            font-size: 0.75rem;
        }

        /* Alert styles for notifications */
        .alert {
            border-radius: 8px;
            margin-bottom: 15px;
        }

        /* Text colors for different event types */
        .text-success { color: var(--mojo-success-color) !important; }
        .text-danger { color: var(--mojo-danger-color) !important; }
        .text-warning { color: var(--mojo-warning-color) !important; }
        .text-info { color: var(--mojo-info-color) !important; }
        .text-primary { color: var(--mojo-primary-color) !important; }
        .text-secondary { color: var(--mojo-secondary-color) !important; }

        /* Responsive improvements */
        @media (max-width: 768px) {
            .btn-group {
                display: flex;
                flex-direction: column;
                width: 100%;
            }

            .btn-group .btn {
                margin-bottom: 5px;
                border-radius: 6px !important;
            }

            .event-log {
                height: 200px !important;
            }

            .stat-item {
                margin-bottom: 15px;
            }
        }

        /* Custom scrollbar for event log */
        .event-log::-webkit-scrollbar {
            width: 8px;
        }

        .event-log::-webkit-scrollbar-track {
            background: #2a2a2a;
        }

        .event-log::-webkit-scrollbar-thumb {
            background: #00ff00;
            border-radius: 4px;
        }

        .event-log::-webkit-scrollbar-thumb:hover {
            background: #00cc00;
        }
    </style>
</head>
<body>
    <!-- Main Application Container -->
    <div id="app">
        <!-- Loading state -->
        <div class="loading-container">
            <div class="text-center">
                <div class="loading-spinner mb-3"></div>
                <h4 class="text-primary">Loading MOJO Events Example...</h4>
                <p class="text-muted">Initializing EventBus and components</p>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- MOJO Framework -->
    <script type="module" src="./app.js"></script>

    <!-- Events example initialization script -->
    <script>
        // Global error handling
        window.addEventListener('error', function(event) {
            console.error('Global Error:', event.error);

            // Show user-friendly error if app fails to load
            setTimeout(() => {
                if (document.getElementById('app').innerHTML.includes('loading-container')) {
                    document.getElementById('app').innerHTML = `
                        <div class="container mt-5">
                            <div class="alert alert-danger">
                                <h4><i class="fas fa-exclamation-triangle"></i> Error</h4>
                                <p>Failed to load the MOJO Events Example.</p>
                                <p><strong>Details:</strong> ${event.error?.message || 'Unknown error'}</p>
                                <hr>
                                <p class="mb-0">
                                    <small>Please check the browser console for more details.</small>
                                </p>
                            </div>
                        </div>
                    `;
                }
            }, 3000);
        });

        window.addEventListener('unhandledrejection', function(event) {
            console.error('Unhandled Promise Rejection:', event.reason);
        });

        // Add visual feedback for stat updates
        function addStatUpdateAnimation(element) {
            if (element) {
                element.classList.add('updated');
                setTimeout(() => {
                    element.classList.remove('updated');
                }, 600);
            }
        }

        // Listen for custom events to add visual feedback
        document.addEventListener('DOMContentLoaded', function() {
            // Watch for stat number changes and add animation
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.target.classList.contains('stat-number') &&
                        mutation.type === 'childList') {
                        addStatUpdateAnimation(mutation.target);
                    }
                });
            });

            // Start observing after a delay to let the app load
            setTimeout(() => {
                const statNumbers = document.querySelectorAll('.stat-number');
                statNumbers.forEach(element => {
                    observer.observe(element, { childList: true, subtree: true });
                });
            }, 2000);
        });

        // Show helpful console message
        console.log(`
ðŸ”” MOJO Framework Events Example
ðŸ“– This example demonstrates:
   â€¢ Global EventBus for component communication
   â€¢ Event publishing and subscribing
   â€¢ Real-time event monitoring and logging
   â€¢ Event filtering and statistics tracking
   â€¢ Wildcard event listeners
   â€¢ Complex event data handling

ðŸ’¡ Features to explore:
   â€¢ Use the Event Publisher to emit different types of events
   â€¢ Watch the Event Listener receive and display events in real-time
   â€¢ Monitor Event Statistics for usage metrics
   â€¢ Try different filter modes in the listener
   â€¢ Observe how events flow between components

ðŸŽ¯ Open the browser developer tools to see detailed event information
        `);
    </script>
</body>
</html>
