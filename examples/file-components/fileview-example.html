<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FileView Example - MOJO Framework</title>

    <!-- Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- MOJO CSS -->
    <link href="../../src/css/core.css" rel="stylesheet">

    <style>
        body {
            padding: 2rem 0;
            background: var(--bs-body-bg);
        }
        .example-card {
            background: var(--bs-body-bg);
            border: 1px solid var(--bs-border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        .demo-header {
            color: var(--bs-primary);
            border-bottom: 2px solid var(--bs-primary-bg-subtle);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        .file-sample {
            background: var(--bs-light);
            border: 1px solid var(--bs-border-color);
            border-radius: 0.375rem;
            padding: 1rem;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.8rem;
            white-space: pre-wrap;
            overflow-x: auto;
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }
        .theme-toggle {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
        }
        .size-demo {
            margin-bottom: 2rem;
        }
        .size-label {
            font-weight: 600;
            color: var(--bs-secondary);
            margin-bottom: 1rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--bs-border-color);
        }
    </style>
</head>
<body>
    <!-- Theme Toggle -->
    <button class="btn btn-outline-primary theme-toggle" onclick="toggleTheme()">
        <i class="bi bi-sun-fill"></i>
    </button>

    <div class="container-fluid">
        <div class="text-center mb-5">
            <h1 class="display-5 fw-bold">
                <i class="bi bi-eye text-primary me-3"></i>
                FileView Component Demo
            </h1>
            <p class="lead text-muted">
                Display file information in organized, user-friendly tabs
            </p>
        </div>

        <!-- Simple URL Examples -->
        <div class="example-card">
            <h2 class="demo-header">
                <i class="bi bi-link me-2"></i>
                Simple URL Files
            </h2>
            <p class="text-muted mb-4">
                FileView can display files from simple URL strings. It automatically detects file type and provides appropriate preview.
            </p>

            <div class="row">
                <div class="col-lg-6 mb-4">
                    <h5 class="mb-3">Image URL</h5>
                    <div id="simple-image-container" style="min-height: 350px;"></div>
                </div>
                <div class="col-lg-6 mb-4">
                    <h5 class="mb-3">Document URL</h5>
                    <div id="simple-document-container" style="min-height: 350px;"></div>
                </div>
            </div>
        </div>

        <!-- Complex File Objects -->
        <div class="example-card">
            <h2 class="demo-header">
                <i class="bi bi-file-earmark-richtext me-2"></i>
                Complex File Objects
            </h2>
            <p class="text-muted mb-4">
                FileView excels at displaying rich file objects with metadata, renditions, and detailed information.
            </p>

            <div class="row">
                <div class="col-lg-6 mb-4">
                    <h5 class="mb-3">Photography File</h5>
                    <div id="photo-file-container" style="min-height: 400px;"></div>
                </div>
                <div class="col-lg-6 mb-4">
                    <h5 class="mb-3">Document File</h5>
                    <div id="document-file-container" style="min-height: 400px;"></div>
                </div>
            </div>
        </div>

        <!-- Size Variants -->
        <div class="example-card">
            <h2 class="demo-header">
                <i class="bi bi-aspect-ratio me-2"></i>
                Size Variants
            </h2>
            <p class="text-muted mb-4">
                FileView supports different size configurations for image previews.
            </p>

            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="size-demo">
                        <div class="size-label">Small (sm)</div>
                        <div id="size-sm-container" style="min-height: 300px;"></div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="size-demo">
                        <div class="size-label">Medium (md) - Default</div>
                        <div id="size-md-container" style="min-height: 300px;"></div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="size-demo">
                        <div class="size-label">Large (lg)</div>
                        <div id="size-lg-container" style="min-height: 300px;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Configuration Options -->
        <div class="example-card">
            <h2 class="demo-header">
                <i class="bi bi-toggles me-2"></i>
                Configuration Options
            </h2>
            <p class="text-muted mb-4">
                FileView can be customized to show or hide different sections based on your needs.
            </p>

            <div class="row">
                <div class="col-lg-6 mb-4">
                    <h5 class="mb-3">Minimal View (Overview Only)</h5>
                    <div id="minimal-view-container" style="min-height: 300px;"></div>
                </div>
                <div class="col-lg-6 mb-4">
                    <h5 class="mb-3">No Actions View</h5>
                    <div id="no-actions-container" style="min-height: 300px;"></div>
                </div>
            </div>
        </div>

        <!-- Sample Data -->
        <div class="example-card">
            <h2 class="demo-header">
                <i class="bi bi-code me-2"></i>
                Sample Data Structures
            </h2>
            <p class="text-muted mb-4">
                Examples of file data structures that FileView can process.
            </p>

            <div class="row">
                <div class="col-md-6">
                    <h5 class="mb-3">Simple URL String</h5>
                    <div class="file-sample" id="simple-data-sample">Loading...</div>
                </div>
                <div class="col-md-6">
                    <h5 class="mb-3">Complex File Object</h5>
                    <div class="file-sample" id="complex-data-sample">Loading...</div>
                </div>
            </div>
        </div>

        <!-- API Usage -->
        <div class="alert alert-info">
            <h5 class="alert-heading">
                <i class="bi bi-code-slash me-2"></i>
                API Usage
            </h5>
            <p>Basic FileView usage examples:</p>
            <pre><code>// Simple URL
const fileView = new FileView({
  file: 'https://example.com/image.jpg'
});

// Complex object
const fileView = new FileView({
  file: fileObject,
  size: 'lg',
  showActions: true,
  showMetadata: true,
  showRenditions: true
});

await fileView.render(true, container);</code></pre>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- MOJO Framework -->
    <script type="module">
        import FileView from '../../src/components/FileView.js';

        // Sample file objects
        const photoFileObject = {
            "id": 31,
            "created": 1756006943,
            "modified": 1756006946,
            "filename": "mountain_landscape.jpg",
            "storage_filename": "mountain_landscape_bf35da8e.jpg",
            "file_size": 3245670,
            "content_type": "image/jpeg",
            "category": "image",
            "upload_status": "completed",
            "metadata": {
                "width": 2048,
                "height": 1365,
                "camera": "Canon EOS R6",
                "lens": "RF 24-70mm F2.8 L IS USM",
                "iso": 200,
                "aperture": "f/8",
                "shutter_speed": "1/250s",
                "focal_length": "35mm",
                "location": "Rocky Mountain National Park"
            },
            "is_active": true,
            "is_public": true,
            "url": "https://images.unsplash.com/photo-1464822759844-d150ad6d1b6f?w=800",
            "renditions": {
                "thumbnail": {
                    "id": 23,
                    "filename": "thumbnail.jpg",
                    "file_size": 15240,
                    "content_type": "image/jpeg",
                    "role": "thumbnail",
                    "url": "https://images.unsplash.com/photo-1464822759844-d150ad6d1b6f?w=150"
                },
                "thumbnail_sm": {
                    "id": 24,
                    "filename": "thumbnail_sm.jpg",
                    "file_size": 8520,
                    "content_type": "image/jpeg",
                    "role": "thumbnail_sm",
                    "url": "https://images.unsplash.com/photo-1464822759844-d150ad6d1b6f?w=96"
                },
                "thumbnail_md": {
                    "id": 25,
                    "filename": "thumbnail_md.jpg",
                    "file_size": 28450,
                    "content_type": "image/jpeg",
                    "role": "thumbnail_md",
                    "url": "https://images.unsplash.com/photo-1464822759844-d150ad6d1b6f?w=300"
                },
                "thumbnail_lg": {
                    "id": 26,
                    "filename": "thumbnail_lg.jpg",
                    "file_size": 89230,
                    "content_type": "image/jpeg",
                    "role": "thumbnail_lg",
                    "url": "https://images.unsplash.com/photo-1464822759844-d150ad6d1b6f?w=500"
                },
                "square_sm": {
                    "id": 27,
                    "filename": "square_sm.jpg",
                    "file_size": 18750,
                    "content_type": "image/jpeg",
                    "role": "square_sm",
                    "url": "https://images.unsplash.com/photo-1464822759844-d150ad6d1b6f?w=150&h=150&fit=crop"
                }
            }
        };

        const documentFileObject = {
            "id": 42,
            "created": 1756106943,
            "modified": 1756106946,
            "filename": "project_proposal.pdf",
            "storage_filename": "project_proposal_ac25ef7b.pdf",
            "file_size": 1847650,
            "content_type": "application/pdf",
            "category": "document",
            "upload_status": "completed",
            "metadata": {
                "pages": 24,
                "author": "John Smith",
                "title": "Q4 Project Proposal",
                "created_date": "2024-01-15T10:30:00Z",
                "modified_date": "2024-01-15T14:22:00Z",
                "version": "1.2"
            },
            "is_active": true,
            "is_public": false,
            "url": "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",
            "checksum": "sha256:f2ca1bb6c7e907d06dafe4687a7e2b8a5d4e2c8f9a3b1e4d5c6a7b8c9d0e1f2",
            "renditions": {}
        };

        document.addEventListener('DOMContentLoaded', async () => {
            await initializeSimpleExamples();
            await initializeComplexExamples();
            await initializeSizeVariants();
            await initializeConfigurationOptions();
            displaySampleData();
        });

        async function initializeSimpleExamples() {
            // Simple image URL
            const imageView = new FileView({
                file: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=600',
                size: 'md'
            });

            const imageContainer = document.getElementById('simple-image-container');
            await imageView.render(true, imageContainer);

            // Simple document URL (simulated)
            const docView = new FileView({
                file: 'https://example.com/sample-document.pdf',
                size: 'md'
            });

            const docContainer = document.getElementById('simple-document-container');
            await docView.render(true, docContainer);
        }

        async function initializeComplexExamples() {
            // Photography file
            const photoView = new FileView({
                file: photoFileObject,
                size: 'lg'
            });

            const photoContainer = document.getElementById('photo-file-container');
            await photoView.render(true, photoContainer);

            // Document file
            const documentView = new FileView({
                file: documentFileObject,
                size: 'md'
            });

            const documentContainer = document.getElementById('document-file-container');
            await documentView.render(true, documentContainer);
        }

        async function initializeSizeVariants() {
            const sizes = ['sm', 'md', 'lg'];

            for (const size of sizes) {
                const view = new FileView({
                    file: photoFileObject,
                    size: size
                });

                const container = document.getElementById(`size-${size}-container`);
                await view.render(true, container);
            }
        }

        async function initializeConfigurationOptions() {
            // Minimal view (overview only)
            const minimalView = new FileView({
                file: photoFileObject,
                size: 'md',
                showRenditions: false,
                showMetadata: false
            });

            const minimalContainer = document.getElementById('minimal-view-container');
            await minimalView.render(true, minimalContainer);

            // No actions view
            const noActionsView = new FileView({
                file: photoFileObject,
                size: 'md',
                showActions: false
            });

            const noActionsContainer = document.getElementById('no-actions-container');
            await noActionsView.render(true, noActionsContainer);
        }

        function displaySampleData() {
            // Simple data sample
            const simpleData = 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=600';
            document.getElementById('simple-data-sample').textContent = JSON.stringify(simpleData, null, 2);

            // Complex data sample (truncated for display)
            const complexDataSample = {
                "id": 31,
                "filename": "mountain_landscape.jpg",
                "file_size": 3245670,
                "content_type": "image/jpeg",
                "category": "image",
                "url": "https://images.unsplash.com/...",
                "metadata": {
                    "width": 2048,
                    "height": 1365,
                    "camera": "Canon EOS R6",
                    "iso": 200
                },
                "renditions": {
                    "thumbnail": { "url": "...", "file_size": 15240 },
                    "thumbnail_lg": { "url": "...", "file_size": 89230 }
                }
            };
            document.getElementById('complex-data-sample').textContent = JSON.stringify(complexDataSample, null, 2);
        }

        // Theme toggle function
        window.toggleTheme = function() {
            const html = document.documentElement;
            const button = document.querySelector('.theme-toggle i');

            if (html.getAttribute('data-bs-theme') === 'light') {
                html.setAttribute('data-bs-theme', 'dark');
                button.className = 'bi bi-moon-fill';
            } else {
                html.setAttribute('data-bs-theme', 'light');
                button.className = 'bi bi-sun-fill';
            }
        };

        // Make components available globally for debugging
        window.MOJO = {
            FileView,
            photoFileObject,
            documentFileObject
        };
    </script>
</body>
</html>
